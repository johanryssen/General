
----- Generating Podman Service Wrappers for Containers -----

To generate a Systemd service wrapper for an individual container and store it in the $HOME/.config/systemd/user directory:
$ podman generate systemd --name containername > $HOME/.config/systemd/user/container-containername.service

-------------------

[root@el8 ~]# podman run -dit ubi8 /bin/bash
bdcb67e7bc972e45658776c636d1e830dec60d16a855bfd26b950f3c5201d980


[root@el8 ~]# podman ps
CONTAINER ID  IMAGE                                   COMMAND       CREATED         STATUS            PORTS                   NAMES
bdcb67e7bc97  registry.access.redhat.com/ubi8:latest  /bin/bash     3 seconds ago   Up 2 seconds ago                          agitated_carver

[root@el8 ~]# podman generate systemd agitated_carver

# container-bdcb67e7bc972e45658776c636d1e830dec60d16a855bfd26b950f3c5201d980.service
# autogenerated by Podman 3.0.2-dev
# Wed May 26 21:01:40 AEST 2021

[Unit]
Description=Podman container-bdcb67e7bc972e45658776c636d1e830dec60d16a855bfd26b950f3c5201d980.service
Documentation=man:podman-generate-systemd(1)
Wants=network.target
After=network-online.target

[Service]
Environment=PODMAN_SYSTEMD_UNIT=%n
Restart=on-failure
TimeoutStopSec=70
ExecStart=/usr/bin/podman start bdcb67e7bc972e45658776c636d1e830dec60d16a855bfd26b950f3c5201d980
ExecStop=/usr/bin/podman stop -t 10 bdcb67e7bc972e45658776c636d1e830dec60d16a855bfd26b950f3c5201d980
ExecStopPost=/usr/bin/podman stop -t 10 bdcb67e7bc972e45658776c636d1e830dec60d16a855bfd26b950f3c5201d980
PIDFile=/var/run/containers/storage/overlay-containers/bdcb67e7bc972e45658776c636d1e830dec60d16a855bfd26b950f3c5201d980/userdata/conmon.pid
Type=forking

[Install]
WantedBy=multi-user.target default.target


# Add output from "podman generate systemd agitated_carver" to .service file:
vim /etc/systemd/system/agitated_carver.service


# Start & Enable service:
[root@el8 system]# systemctl enable --now agitated_carver.service
Created symlink /etc/systemd/system/multi-user.target.wants/agitated_carver.service → /etc/systemd/system/agitated_carver.service.
Created symlink /etc/systemd/system/default.target.wants/agitated_carver.service → /etc/systemd/system/agitated_carver.service.



