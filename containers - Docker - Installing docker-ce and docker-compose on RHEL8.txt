## Installing docker-ce and docker-compose on RHEL8

RHEL8 does not support docker-ce by default.

# Add the external repository by running the following command.
sudo dnf config-manager --add-repo=https://download.docker.com/linux/centos/docker-ce.repo

# Verify whether the repository has been enabled.
sudo dnf repolist -v

Install docker-ce with the --nobest option.
(The first version of docker-ce with satisfiable dependencies is selected as the "fallback" version).
sudo dnf install --nobest docker-ce

# Install the latest available containerd.io package manually
sudo dnf install https://download.docker.com/linux/centos/7/x86_64/stable/Packages/containerd.io-1.2.6-3.3.el7.x86_64.rpm

# Install the latest docker-ce version:
sudo dnf install docker-ce

# Start and enable the docker daemon
sudo systemctl enable --now docker

#Confirm whether the daemon is active by running this command:
systemctl is-active docker

## Install docker-compose globally.

# Download the binary file from the projectâ€™s GitHub page:
curl -L "https://github.com/docker/compose/releases/download/1.23.2/docker-compose-$(uname -s)-$(uname -m)" -o docker-compose

# Move it to the /usr/local/bin folder, and then make it executable:
sudo mv docker-compose /usr/local/bin && sudo chmod +x /usr/local/bin/docker-compose
sudo ln -s /usr/local/bin/docker-compose /usr/bin/docker-compose 

Detailed info:
https://linuxconfig.org/how-to-install-docker-in-rhel-8


## You may encounter a Docker CE container connectivity issue
## Resolve Docker CE container connectivity issue

# Check which interface Docker is using. For example, 'docker0'.
ip link show

# Check available firewalld zones. For example, 'public'
sudo firewall-cmd --get-active-zones

# Check which zone the Docker interface is bound to. Typically, the Docker interface is not bound to a zone yet.
sudo firewall-cmd --get-zone-of-interface=docker0

# Add the 'docker0' interface to the 'public' zone. Changes are visible only after the firewalld is reloaded
sudo nmcli connection modify docker0 connection.zone public

# Masquerading enables Docker ingress and egress.
sudo firewall-cmd --zone=public --add-masquerade --permanent

# Reload the firewalld
sudo firewall-cmd --reload

# Restart dockerd
sudo systemctl restart docker
